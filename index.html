<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>LuckSpin</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {margin:0;background:#0a001f;color:#fff;font-family:system-ui;text-align:center;padding:20px;background:radial-gradient(circle at top, #1a0040, #000);}
    h1 {font-size:52px;margin:10px;background:linear-gradient(90deg,#00ffff,#00ff9d);-webkit-background-clip:text;color:transparent;}
    .jack {font-size:64px;font-weight:900;color:#00ff9d;margin:30px 0;letter-spacing:2px;}
    .bal {font-size:32px;margin:15px;color:#00ffff;}
    .btn {background:linear-gradient(45deg,#00ff9d,#0088ff);color:#000;padding:22px;border-radius:20px;font-weight:900;font-size:24px;margin:15px 0;cursor:pointer;box-shadow:0 8px 20px rgba(0,255,150,0.4);}
    .ref {background:#200040;padding:20px;border-radius:16px;margin:20px 0;}
  </style>
</head>
<body>
  <h1>LUCKSPIN</h1>
  <div class="jack" id="jackpot">$250,000</div>
  <div class="bal">Coins: <span id="coins">25,000</span> SC</div>
  <div class="bal">Entries: <span id="entries">0</span></div>

  <div class="btn" onclick="claim()">CLAIM DAILY +1,000 SC</div>
  <div class="btn" onclick="share()">INVITE & GET 25,000 SC</div>
  <div class="btn" onclick="buy()">BUY 100 ENTRIES â€“ $10</div>

  <div class="ref">
    <b>Your link:</b><br>
    <input type="text" id="refLink" value="" readonly style="width:100%;padding:12px;margin:10px 0;background:#000;color:#00ff9d;border:2px solid #00ff9d;border-radius:12px;font-size:16px;">
    <div class="btn" onclick="copy()">COPY LINK</div>
  </div>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready();
  tg.expand();
  
  const userId = tg.initDataUnsafe.user?.id || Math.random();
  const refId = new URLSearchParams(location.search).get('ref');
  
  let user = JSON.parse(localStorage.getItem('luckspin_user_'+userId) || '{"coins":25000,"entries":0,"daily":0,"ref":false}');

  // Ñ€ÐµÑ„ÐµÑ€Ð°Ð»ÐºÐ°
  if(refId && refId != userId && !user.ref) {
    user.coins += 25000;
    user.ref = true;
    setTimeout(()=>tg.showAlert('ðŸŽ‰ +25,000 SC Ð·Ð° Ñ€ÐµÑ„ÐµÑ€Ð°Ð»ÐºÑƒ!'),1000);
  }

  // ÐµÐ¶ÐµÐ´Ð½ÐµÐ²ÐºÐ°
  window.claim = function() {
    const today = Math.floor(Date.now()/86400000);
    if(user.daily < today) {
      user.coins += 1000;
      user.daily = today;
      save();
      tg.HapticFeedback.notificationOccurred('success');
      tg.showAlert('ðŸ”¥ +1,000 SC Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¾!');
    } else {
      tg.showAlert('â° Ð£Ð¶Ðµ Ð·Ð°Ð±Ñ€Ð°Ð» ÑÐµÐ³Ð¾Ð´Ð½Ñ');
    }
  }

  // ÑˆÐ°Ñ€Ð¸Ð½Ð³
  window.share = function() {
    const link = `https://t.me/${tg.initDataUnsafe.start_param ? '@'+tg.initDataUnsafe.start_param : 'LuckSpinFreeBot'}?start=ref${userId}`;
    tg.openTelegramLink('https://t.me/share/url?url='+encodeURIComponent(link)+'&text=ðŸš€ LuckSpin â€“ Ð´Ð¶ÐµÐºÐ¿Ð¾Ñ‚ $250,000 ÐºÐ°Ð¶Ð´Ñ‹Ðµ 30 Ð´Ð½ÐµÐ¹! ÐŸÐ¾ Ð¼Ð¾ÐµÐ¹ ÑÑÑ‹Ð»ÐºÐµ ÑÑ€Ð°Ð·Ñƒ +25,000 SC ðŸ”¥');
  }

  // Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°
  window.buy = function() {
    tg.showPopup({title:'ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ°',message:'ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ 100 Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð² Ð·Ð° $10 USDT?',buttons:[{type:'ok'},{type:'cancel'}]}, (btn) => {
      if(btn === 'ok') {
        user.entries += 100;
        save();
        tg.showAlert('âœ… +100 Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²! Ð¢Ñ‹ Ð² Ñ€Ð¾Ð·Ñ‹Ð³Ñ€Ñ‹ÑˆÐµ!');
      }
    });
  }

  // ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑÑ‹Ð»ÐºÐ¸
  window.copy = function() {
    const link = `https://t.me/LuckSpinFreeBot?start=ref${userId}`;
    navigator.clipboard.writeText(link);
    tg.showAlert('Ð¡ÑÑ‹Ð»ÐºÐ° ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°!');
    document.getElementById('refLink').value = link;
  }

  function save() {
    localStorage.setItem('luckspin_user_'+userId, JSON.stringify(user));
    document.getElementById('coins').innerText = user.coins.toLocaleString();
    document.getElementById('entries').innerText = user.entries;
    document.getElementById('refLink').value = `https://t.me/LuckSpinFreeBot?start=ref${userId}`;
  }

  // Ð´Ð¶ÐµÐºÐ¿Ð¾Ñ‚ Ñ€Ð°ÑÑ‚Ñ‘Ñ‚
  setInterval(()=>{
    const add = Math.floor(Math.random()*900)+100;
    const current = parseInt(document.getElementById('jackpot').innerText.replace(/[^0-9]/g,'')) + add;
    document.getElementById('jackpot').innerText = '$'+current.toLocaleString();
  },3000);

  save();
</script>
</body>
</html>
